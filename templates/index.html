<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raspberry Pi モーター制御</title>
    
    <!-- 外部CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- Socket.IO -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
</head>
<body>
    <div class="container">
        <h1>
            Raspberry Pi モーター制御
            <span id="connectionStatus" class="connection-status disconnected"></span>
        </h1>
        
        <!-- カメラストリーム表示セクション -->
        <div class="camera-section">
            <h2 class="camera-title">ライブカメラ映像</h2>
            <div class="camera-container">
                <img id="videoStream" src="/video_feed" alt="カメラ映像" class="camera-stream">
            </div>
        </div>
        
        <div style="text-align: center; margin-bottom: 20px; font-size: 14px; color: #666;">
            <strong>キーボード操作:</strong> WASD/矢印キー=移動 | IJKL=カメラ | C=カメラ中央<br>
            <strong>マウス操作:</strong> ボタン長押し=移動 | スライダー=カメラ角度調整 | LED番号クリック=選択
        </div>
        
        <div class="speed-control">
            <label for="speedSlider">速度設定:</label>
            <div class="speed-value">
                <span id="speedValue">50</span>%
            </div>
            <input type="range" id="speedSlider" class="speed-slider" min="0" max="100" value="50">
        </div>
        
        <div class="duration-control">
            <label for="durationInput">継続時間設定:</label>
            <small>（ボタンを押している間のみ動作します）</small>
        </div>
        
        <div class="control-panel">
            <button class="control-btn forward-btn" data-action="forward">
                ↑<br>前進
            </button>
            <button class="control-btn left-btn" data-action="left">
                ←<br>左旋回
            </button>
            <button class="control-btn right-btn" data-action="right">
                →<br>右旋回
            </button>
            <button class="control-btn backward-btn" data-action="backward">
                ↓<br>後進
            </button>
        </div>
        
        <!-- サーボモーター制御セクション -->
        <div class="servo-section">
            <div class="servo-title">📹 カメラ制御</div>
            <div class="servo-controls">
                <!-- ピッチ制御 -->
                <div class="servo-group">
                    <h3>ピッチ（上下）</h3>
                    <div class="servo-panel">
                        <button class="servo-btn servo-up" data-servo="pitch" data-direction="up">
                            ↑<br>上
                        </button>
                        <button class="servo-btn servo-center" data-servo="pitch" data-direction="center">
                            ●<br>中央
                        </button>
                        <button class="servo-btn servo-down" data-servo="pitch" data-direction="down">
                            ↓<br>下
                        </button>
                    </div>
                    <div class="servo-angle">角度: <span id="pitchAngle">90</span>°</div>
                    <div class="servo-slider-container">
                        <input type="range" id="pitchSlider" class="servo-slider" min="0" max="180" value="90">
                        <div style="font-size: 12px; color: #888;">スライダーで直接角度調整</div>
                    </div>
                </div>
                
                <!-- ヨー制御 -->
                <div class="servo-group">
                    <h3>ヨー（左右）</h3>
                    <div class="servo-panel">
                        <button class="servo-btn servo-left" data-servo="yaw" data-direction="left">
                            ←<br>左
                        </button>
                        <button class="servo-btn servo-center" data-servo="yaw" data-direction="center">
                            ●<br>中央
                        </button>
                        <button class="servo-btn servo-right" data-servo="yaw" data-direction="right">
                            →<br>右
                        </button>
                    </div>
                    <div class="servo-angle">角度: <span id="yawAngle">90</span>°</div>
                    <div class="servo-slider-container">
                        <input type="range" id="yawSlider" class="servo-slider" min="0" max="180" value="90">
                        <div style="font-size: 12px; color: #888;">スライダーで直接角度調整</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- LED制御セクション -->
        <div class="led-section">
            <div class="led-title">💡 フルカラーLED制御</div>
            <div class="led-controls">
                <!-- LED表示 -->
                <div class="led-row">
                    <div class="led-indicator" data-led="0">1</div>
                    <div class="led-indicator" data-led="1">2</div>
                    <div class="led-indicator" data-led="2">3</div>
                    <div class="led-indicator" data-led="3">4</div>
                    <div class="led-indicator" data-led="4">5</div>
                    <div class="led-indicator" data-led="5">6</div>
                </div>
                
                <!-- 色選択 -->
                <div class="color-picker-section">
                    <label>色選択:</label>
                    <input type="color" id="colorPicker" class="color-input" value="#ff0000">
                    <span>R:</span>
                    <input type="range" id="redSlider" min="0" max="255" value="255" style="width: 80px;">
                    <span id="redValue">255</span>
                    <span>G:</span>
                    <input type="range" id="greenSlider" min="0" max="255" value="0" style="width: 80px;">
                    <span id="greenValue">0</span>
                    <span>B:</span>
                    <input type="range" id="blueSlider" min="0" max="255" value="0" style="width: 80px;">
                    <span id="blueValue">0</span>
                </div>
                
                <!-- 明度制御 -->
                <div class="brightness-control">
                    <label>明度:</label>
                    <input type="range" id="brightnessSlider" class="brightness-slider" min="0" max="100" value="100">
                    <span id="brightnessValue">100</span>%
                </div>
                
                <!-- LED制御ボタン -->
                <div class="led-buttons">
                    <button class="led-btn led-btn-apply" id="applyColorBtn">選択色を適用</button>
                    <button class="led-btn led-btn-rainbow" id="rainbowBtn">レインボー</button>
                    <button class="led-btn led-btn-chase" id="chaseBtn">チェイス</button>
                    <button class="led-btn led-btn-off" id="ledOffBtn">消灯</button>
                </div>
            </div>
        </div>
        
        <div class="status">
            <div class="status-title">ステータス</div>
            <div id="statusValue" class="status-value">待機中...</div>
        </div>
    </div>

    <!-- 外部JavaScript -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
